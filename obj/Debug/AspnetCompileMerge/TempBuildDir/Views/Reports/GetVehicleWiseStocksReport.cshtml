@model IEnumerable<Fleet_WorkShop.Models.VehicleReport>
<script>
    $(document).ready(function () {
        var uri = window.location.toString();
        if (uri.lastIndexOf("1") > 0) {
            var cleanUri = uri.substring(0, uri.lastIndexOf("1"));
            window.history.replaceState({}, document.title, cleanUri);
        }
    });
</script>

<script type="text/javascript">
    $(function () {
        $('#txtStartDate,#txtEndDate').datepicker({
            dateFormat: "dd/M/yy",
            changeMonth: true,
            changeYear: true,
            yearRange: "-60:+0",
            maxDate:0
        });
    });

   
    
    $(function () {
        var out = true;
        $('#btn').click(function() {
            var fit_start_time = $("#txtStartDate").val();
            var fit_end_time = $("#txtEndDate").val();

            if (Date.parse(fit_end_time) <= Date.parse(fit_start_time)) {
                alert("Please select a different End Date.");
                $("#txtEndDate").val('');
                out = false;
            }
            if(out==true)
            {
            var serviceURL = '/workshop/Reports/GetVehicleWiseStocksReportDetails';
            var data = {
                startDate: $('#txtStartDate').val(),
                endDate: $('#txtEndDate').val()

            };
            $.ajax({
                type: "POST",
                url: serviceURL,
                data: JSON.stringify(data),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(response) {
                  
                    if (response !== 0) {
                        alert('Record Inserted');
                    }
                    //else {
                    //    alert("Failed to Insert Please check ");
                    //}
                },
                failure: function(response) {
                    alert(response.responseText);
                }
                //error: function (response) {
                //    alert(response.responseText);
                //}
            });
           }
            if (!out) { event.preventDefault(); }
            return out;
        });

    });
</script>
<div class="panel panel-primary" style="width: 100%; height: 100%; margin-top: 20px;" align="center">
    <div class="panel-heading">
        VehicleWise Stocks Report
    </div>
    <div class="panel-body">
        <div class="col-lg-6">
            <form class="form-horizontal">
                <div class="form-group">
                    <label class="control-label  col-lg-4">Start Date</label>
                    <div class="col-lg-8">
                        @*<select id="Vehicle" class="form-control" > </select>*@
                        <input type="text" class="form-control" id="txtStartDate" placeholder="Start Date"  onkeypress="return false;">
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-lg-4">End Date</label>
                    <div class="col-lg-8">
                        <input class="form-control" id="txtEndDate" maxlength="10" onkeypress="return false;" placeholder="EndDate" type="text">
                    </div>
                </div>

            </form>
        </div>
        <div style="margin-bottom: 90px" class="col-lg-6">
            <form class="form-horizontal">
                <div class="form-group">
                    
                    <div class="col-sm-offset-2 col-sm-4" style="margin-bottom: 30px">                       
                        <button type="submit" id="btn" class="btn btn-default" onclick="location.href='@Url.Action("GetVehicleWiseStocksReport", "Reports", new { targe="_blank" })'"  style="margin-bottom: -150px; background-color: blue; color: white;">Submit</button>
                    </div>

                </div>
            </form>

        </div>
        </div>
  
    
    <div class="panel-footer">

    </div>
 
    <div class="col-lg-6" style="width:100%">
        <form class="form-horizontal">
            <div class="form-group">
                <div style="margin-top:30px">
                    @*@if (Model != null)
                    {
                        @Html.Partial("_GetVehicleWiseStocksReportDetails");
                    }*@
                </div>

            </div>
        </form>

    </div>
    </div>